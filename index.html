<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fitness App</title>
<style>
body { font-family: sans-serif; padding: 20px; background: #f0f8ff; }
h1, h2 { text-align: center; }
input, select, button { display: block; margin: 10px auto; padding: 10px; font-size: 16px; }
#training, #weightSection, #nutrition, #exerciseOverview { margin-top: 20px; padding: 15px; background: #ffffff; border-radius: 10px; }
#timer { font-size: 48px; text-align: center; margin: 20px 0; }
canvas { max-width: 100%; }
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h1>üèãÔ∏è Bodyweight Fitness App</h1>

<!-- Profil & Kalorien -->
<div id="profile">
<h2>Profil eingeben</h2>
<label>Geschlecht:</label>
<select id="geschlecht">
  <option value="m">M√§nnlich</option>
  <option value="w">Weiblich</option>
</select>

<label>Alter:</label>
<input type="number" id="alter" min="10" max="100">

<label>Gr√∂√üe (cm):</label>
<input type="number" id="groesse" min="50" max="250">

<label>Gewicht (kg):</label>
<input type="number" id="gewicht" min="20" max="300">

<label>Aktivit√§t:</label>
<select id="aktivitaet">
  <option value="1.2">Wenig aktiv</option>
  <option value="1.375">Leicht aktiv</option>
  <option value="1.55">Moderat aktiv</option>
  <option value="1.725">Sehr aktiv</option>
</select>

<button onclick="berechneKalorien()">Kalorien berechnen</button>
<p id="kalorien"></p>
</div>

<!-- Ern√§hrungstipps -->
<div id="nutrition">
<h2>üçè Ern√§hrungstipps</h2>
<ul>
<li>Mehr Gem√ºse & Eiwei√ü</li>
<li>Weniger Zucker & Fett</li>
<li>Ausreichend Wasser trinken</li>
<li>Regelm√§√üig kleine Mahlzeiten</li>
</ul>
</div>

<!-- √úbungs√ºbersicht & Training -->
<div id="exerciseOverview">
<h2>üèÉ √úbungs√ºbersicht</h2>
<ul id="exerciseList"></ul>
<button onclick="startTraining()">Training starten</button>
<div id="timer">00:00</div>
</div>

<!-- Gewichtsentwicklung -->
<div id="weightSection">
<h2>üìä Gewichtsentwicklung</h2>
<canvas id="weightChart" width="300" height="200"></canvas>
<label for="neuesGewicht">Neues Gewicht (kg)</label>
<input type="number" id="neuesGewicht" min="20" max="200">
<button onclick="hinzufuegenGewicht()">Speichern</button>
</div>

<script>
// --- Kalorienberechnung ---
function berechneKalorien() {
    const g = parseFloat(document.getElementById('gewicht').value);
    const h = parseFloat(document.getElementById('groesse').value);
    const a = parseInt(document.getElementById('alter').value);
    const gesch = document.getElementById('geschlecht').value;
    const faktor = parseFloat(document.getElementById('aktivitaet').value);

    if (!g || !h || !a) { alert("Bitte alle Daten eingeben!"); return; }

    let bmr = (gesch==='m') ? 10*g + 6.25*h - 5*a + 5 : 10*g + 6.25*h - 5*a - 161;
    let tdee = Math.round(bmr * faktor);
    document.getElementById('kalorien').textContent = "Kalorienbedarf zum Abnehmen: " + (tdee-500) + " kcal";
}

// --- √úbungen ---
const exercises = ["Kniebeugen", "Liegest√ºtze", "Plank", "Ausfallschritte", "Burpees"];
const exerciseList = document.getElementById('exerciseList');
exercises.forEach(e => {
    const li = document.createElement('li');
    li.textContent = e;
    exerciseList.appendChild(li);
});

// --- Trainingstag & automatische Steigerung ---
let startTime = 30; // Startzeit pro √úbung
const maxTime = 90;

// Lade letzten Trainingsstand
let trainingData = JSON.parse(localStorage.getItem('trainingData')) || { lastDate: '', timePerExercise: startTime };

// Pr√ºfe ob heute schon trainiert
const heute = new Date().toLocaleDateString();
if (trainingData.lastDate !== heute) {
    // Neues Training, Steigerung um 5 Sekunden
    trainingData.timePerExercise = Math.min(trainingData.timePerExercise + 5, maxTime);
    trainingData.lastDate = heute;
    localStorage.setItem('trainingData', JSON.stringify(trainingData));
}

// --- Timer & Sounds mit automatischer Dauer ---
const tickSound = new Audio('https://www.soundjay.com/button/beep-07.mp3');
const endSound = new Audio('https://www.soundjay.com/button/beep-10.mp3');

function startTraining() {
    let timeLeft = trainingData.timePerExercise;
    const timerElement = document.getElementById('timer');
    
    const interval = setInterval(() => {
        timerElement.textContent = timeLeft + "s";
        if (timeLeft>0) tickSound.play();
        timeLeft--;
        if (timeLeft<0) {
            clearInterval(interval);
            endSound.play();
            alert("√úbung beendet!");
        }
    }, 1000);
}

// --- Gewichtsdaten ---
let gewichtDaten = JSON.parse(localStorage.getItem('gewichtDaten')) || [];

const ctx = document.getElementById('weightChart').getContext('2d');
const weightChart = new Chart(ctx, {
    type:'line',
    data:{
        labels: gewichtDaten.map(d=>d.datum),
        datasets:[{label:'Gewicht (kg)', data:gewichtDaten.map(d=>d.gewicht), borderColor:'blue', fill:false}]
    },
    options:{
        responsive:true,
        scales:{ y: { beginAtZero:false } }
    }
});

function hinzufuegenGewicht(){
    const neuesGewicht = parseFloat(document.getElementById('neuesGewicht').value);
    if (!neuesGewicht) return;
    const datum = new Date().toLocaleDateString();
    gewichtDaten.push({datum, gewicht:neuesGewicht});
    localStorage.setItem('gewichtDaten', JSON.stringify(gewichtDaten));

    weightChart.data.labels.push(datum);
    weightChart.data.datasets[0].data.push(neuesGewicht);
    weightChart.update();
}
</script>
</body>
</html>
